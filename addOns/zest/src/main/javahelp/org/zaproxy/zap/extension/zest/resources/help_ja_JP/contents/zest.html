<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Zest</title>
</head>
<body>
<h1>Zest</h1>
<p>
Zestは、実験的な特殊スクリプト言語 (ドメイン固有言語またはDSLとも呼ばれます) です。元々はMozillaのセキュリティチームによって開発され、Webに特化したセキュリティツールで使用されることを目的としています。
<p>
これはZAPにデフォルトで含まれています。<br>

<h2>エンジン名</h2>
エンジン名は <code>Mozilla Zest</code>です。ZAPを手動またはプログラムで設定する際には、この名称を使用してください。

<h2>Zestスクリプトの作り方</h2>

Zestスクリプトを作成するには、様々な方法があります：

<h3>「新規Zestスクリプトを記録」ボタン</h3>
<ul>
<li>メインツールバーの「新規Zestスクリプトを記録」ボタンをクリックします</li>
<li>「Zestスクリプトの追加」ダイアログでスクリプトの名前を入力します</li>
<li>記録したいリクエストのプレフィックス (接頭辞) を選択します。すべてのリクエストを記録する場合は空欄のままにします。</li>
<li>「保存」ボタンをクリックします</li>
<li>「新規Zestスクリプトを記録」ボタンが押されたままになり、「新規Zestスクリプトを記録中」に変わり、赤いアイコンになります。</li>
</ul>
新しいZestスクリプトは、「スクリプト」タブに赤い「記録中」アイコン付きで表示されます。<br>
指定したプレフィックス配下で行われたリクエストは、すべてこのスクリプトに追加されます。<br>
記録を停止するには、「新規Zestスクリプトを記録中」ボタンを再度クリックします。<br>
この方法では「スタンドアロン」タイプのZestスクリプトしか記録できない点に注意してください。他のタイプのZestスクリプトを作成したい場合は、別の方法を用いる必要があります。
<br><br>
また、任意のスタンドアロンZestスクリプトを右クリックし、「記録を開始」および「記録を停止」ボタンを使用することもできます。
<br><br>
スクリプトの記録には、主にサーバーサイドとクライアントサイドの2つの方法があります。クライアントサイドでの記録には、ZAPブラウザ拡張機能と専用のクライアントアドオンを活用します。 
<br>
この組み合わせにより、ユーザーの操作を効率的にZestスクリプトとしてキャプチャし、保存することができます。 

<h3>「新しいスクリプト」ボタン</h3>
<ul>
<li>「スクリプト」ツリータブに移動します</li>
<li>「新しいスクリプト」ボタンをクリックします</li>
<li>「新規スクリプト」ダイアログで、スクリプトに適した名前を入力します</li>
<li>スクリプトタイプを選択します (詳細はスクリプトアドオンのヘルプを参照)</li>
<li>Zestスクリプトエンジンを選択します</li>
<li>(必要に応じて) テンプレートを一つ選択します</li>
<li>「保存」ボタンをクリックします</li>
</ul>
この方法では、あらゆるタイプのZestスクリプトを作成できます。

<h3>Zestテンプレートを右クリック</h3>
<ul>
<li>「スクリプト」ツリータブに移動します</li>
<li>「テンプレート」ノードを展開し、使用するテンプレートを探します。</li>
<li>テンプレートを右クリックし、 「新しいスクリプト…」を選択します。</li>
<li>「保存」ボタンをクリックします</li>
</ul>
この方法では、あらゆるタイプのZestスクリプトを作成できます。

<h3>リクエストを右クリック</h3>
<ul>
<li>「履歴」タブなどのリクエストが表示されているタブに移動します</li>
<li>1つ、または複数のリクエストを選択します</li>
<li>選択範囲を右クリックします</li>
<li>「Zest スクリプトの追加」メニューを選択すると、既存のスタンドアロンスクリプトを選択したり、新しいスタンドアロンスクリプトを作成したりすることができます。</li>
</ul>
リクエストを追加できるのは「スタンドアロン」タイプのZestスクリプトのみである点に注意してください。

<h3>Plug-n-Hack</h3>
最近のバージョンのFirefoxを使用している場合、ブラウザ内からZestスクリプトを作成できます。<br>
<ul>
<li>ZAP「クイックスタート」タブの「Plug-n-Hack」ボタンをクリックします</li>
<li>Plug-n-Hack Firefoxアドオンをインストールし、すべてのダイアログを受け入れます</li>
<li>Firefoxで 'Shift F2'を押してDeveloper Toolbarにアクセスしてください</li>
<li>新しいZestスクリプトの記録を開始するために、 「zap record on global」と入力します</li>
<li>ZAPを通じて行ったリクエストがすべてスクリプトに追加されます</li>
<li>「zap record off global」と入力してスクリプトの記録を停止します</li>
</ul>
この方法では「スタンドアロン」タイプのZestスクリプトしか記録できない点に注意してください。他のタイプのZestスクリプトを作成したい場合は、別の方法を用いる必要があります。

<h2>Zestスクリプトの編集</h2>
Zestスクリプトは、「スクリプト」ツリータブでグラフィカルに編集します。<br>
各ステートメントはツリー内のノードとして表現されます。ノードをダブルクリックすると、そのステートメントのプロパティを編集できます。<br>
Zestのノードを右クリックすることで、ステートメントの追加、移動、削除が可能です。<br>
また、他のタブに表示されているリクエストを右クリックして、「スタンドアロン」タイプのZestスクリプトに追加することもできます。<br>
さらに、「リクエスト」タブや「レスポンス」タブでテキストを選択した際に利用できる、いくつかの右クリックオプションもあります。<br>
<br>
Zestには一連の「組み込み」変数が含まれているほか、独自の変数を宣言することも可能です。<br>
編集ダイアログでは（必要に応じて）右クリックメニューが提供され、利用可能な変数名を貼り付けることができます。<br>

<h2>認証スクリプト</h2>
認証スクリプトでは、 <code>TOTP</code>というZAPのカスタム変数を使用できます。この変数は、ユーザーの認証情報にあるTOTPデータから生成されたTOTPコードを、入力フィールドに送信するために利用します。

<h2>外部リンク</h2>
<table>
	<td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
	<td><a href="https://github.com/zaproxy/zest/">https://github.com/zaproxy/zest/</a></td>
	<td>Zest GitHubリポジトリ、言語の詳細を含む</td>
</tr>
</table>

</body>
</html>
